package generator

import (
	"fmt"
	"time"
)

func (c *Client) GenerateMetadata() (string, error) {
	time.Sleep(time.Duration(RanNumber(400, 700)) * time.Millisecond)
	nowtime := time.Now().UTC().UnixNano() / 1e6

	connection := 50 * RanNumber(1, 5)
	usedHeap := 1000000 + RanNumber(0, 52137720)
	totalHeap := 1000000 + RanNumber(0, 32137720)
	wgl := c.Device.Wv + c.Device.Wr

	JsonSendingPayload := fmt.Sprintf(`{"deviceType":"%v","deviceId":"%v","appSessionId":"%v","osVersion":"Windows 10","display":{"ops":0,"webGl":"","devicePixelRatio":1,"screenWidth":%v,"screenHeight":%v,"availWidth":%v,"availHeight":%v,"width":%v,"height":%v,"colorDepth":24,"pixelDepth":24,"availLeft":0,"availTop":0,"onchange":null,"isExtended":true},"sensorsMetadata":{"DEDVCE_LIGHT_SUPPORTED":false,"IS_TOUCH_DEVICE":false,"PROXIMITY_SUPPORTED":false},"identificationMetadata":{"OS_NAME":"Windows","OS_VERSION":"10","DEVICE_MODEL":"","DEVICE_VENDOR":"","BROWSER_ENGINE_NAME":"Blink","BROWSER_ENGINE_VERSION":"106.0.0.0","CPU_ARCHITECTURE":"amd64","NAVIGATOR_VENDOR":"Google Inc.","NAVIGATOR_PLUGINS_LENGTH":5,"NAVIGATOR_MIME_TYPES_LENGTH":2,"NAVIGATOR_LANGUAGE":"en-GB","NAVIGATOR_LANGUAGES.0":"en-GB","NAVIGATOR_WEB_DRIVER":false,"NAVIGATOR_HARDWARE_CONCURRENCY":32,"NAVIGATOR_VIBRATE":true,"PUSH_NOTIFICATIONS_SUPPORTED":true,"NAVIGATOR_APP_CODE_NAME":"Mozilla","NAVIGATOR_APP_NAME":"Netscape","NAVIGATOR_APP_VERSION":"5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/106.0.0.0 Safari/537.36","NAVIGATOR_ON_LINE":true,"NAVIGATOR_PLATFORM":"Win32","NAVIGATOR_PRODUCT":"Gecko","NAVIGATOR_USER_AGENT":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/106.0.0.0 Safari/537.36","NAVIGATOR_DEVICE_MEMORY":8,"NAVIGATOR_CONNECTION_RTT":%v,"ambient_light":false,"application_cache":false,"audio":true,"audio.ogg":"probably","audio.mp3":"probably","audio.opus":"probably","audio.wav":"probably","audio.m4a":"maybe","battery_api":true,"blob_constructor":true,"context_menu":false,"cors":true,"custom_elements":true,"custom_protocol_handler":true,"custom_event":true,"dart":false,"data_view":true,"event_listener":true,"force_touch":false,"full_screen":true,"game_pads":true,"geo_location":true,"ie8compat":false,"internationalization":true,"json":true,"ligatures":true,"media_source":true,"message_channel":true,"notification":true,"page_visibility":true,"performance":true,"pointer_events":true,"pointer_lock":true,"query_selector":true,"quota_management":true,"request_animation_frame":true,"service_worker":true,"touch_events":true,"typed_arrays":true,"vibrate":true,"video":true,"video.ogg":"probably","video.h264":"probably","video.h265":"","video.webm":"probably","video.vp9":"probably","video.hls":"","video.av1":"","web_gl":true,"web_sockets":true,"x_domain_request":false,"matchmedia":true,"JS_CHALLENGE.status":"success","JS_CHALLENGE.sessionId":"%v","IS_WEBGL":true,"WEBGLVENDORANDRENDERER":"%v","IS_WEBGL2":true,"WEBGL2VENDORANDRENDERER":"%v","HASLIEDLANGUAGES":false,"HASLIEDRESOLUTION":false,"HASLIEDOS":false,"HASLIEDBROWSER":false,"COLORDEPTH":24,"DEVICEMEMORY":8,"RESOLUTION":"%v,%v","AVAILABLE_RESOLUTION":"%v,%v","HARDWARECONCURRENCY":32,"TIMEZONEOFFSET":0,"TIMEZONE":"Europe/London","SESSIONSTORAGE":true,"LOCALSTORAGE":true,"INDEXEDDB":true,"OPENDATABASE":true,"PLATFORM":"Win32","IS_CANVAS":true,"TOUCH_SUPPORT.maxTouchPoints":0,"TOUCH_SUPPORT.touchEvent":false,"TOUCH_SUPPORT.touchStart":false,"JS_FONTS":17,"AUDIO_FINGERPRINT":124.04347527516074,"PRODUCT_SUB":"20030107","EMPTY_EVAL_LENGTH":33,"ERRORFF":false,"CHROME":true,"COOKIES_ENABLED":true,"IS_INCOGNITO":false,"IS_PRIVATE_MODE":false,"IS_WEB_GLSTATUS":-1,"HEADLESS.selenium":"","HEADLESS.phantomjs._phantom":"","HEADLESS.phantomjs.__phantomas":"","HEADLESS.phantomjs.callPhantom":"","HEADLESS.nodejs.Buffer":"","HEADLESS.couchjs.emit":"","HEADLESS.rhino.spawn":"","HEADLESS.chromium.domAutomationController":"","HEADLESS.chromium.domAutomation":"","HEADLESS.outerWidth":%v,"HEADLESS.outerHeight":%v,"HEADLESS.headless_chrome":false,"HEADLESS.navigator.webdriver_present":true,"HEADLESS.window.chrome_missing":false,"HEADLESS.permissions_api_overriden":false,"HEADLESS.navigator.plugins_empty":false,"HEADLESS.navigator.languages_blank":false,"HEADLESS.consistent_plugins_prototype":true,"HEADLESS.consistent_mimetypes_prototype":true,"HEADLESS.permissions_api":false,"HEADLESS.iframe_window.headless_chrome":false,"HEADLESS.iframe_window.navigator.webdriver_present":true,"HEADLESS.iframe_window.window.chrome_missing":false,"HEADLESS.iframe_window.permissions_api_overriden":false,"HEADLESS.iframe_window.navigator.plugins_empty":false,"HEADLESS.iframe_window.navigator.languages_blank":false,"HEADLESS.iframe_window.consistent_plugins_prototype":true,"HEADLESS.iframe_window.consistent_mimetypes_prototype":true,"HEADLESS.iframe_window.permissions_api":false,"STEALTH.srcdoc_throws_error":false,"STEALTH.srcdoc_triggers_window_proxy":false,"STEALTH.index_chrome_too_high":false,"STEALTH.chrome_runtime_functions_invalid":false,"STEALTH.Function_prototype_toString_invalid_typeError":true,"REF_LINK":"","PLUGINS.length":5,"PLUGINS.details.0.length":2,"PLUGINS.details.0.name":"PDF Viewer","PLUGINS.details.0.filename":"internal-pdf-viewer","PLUGINS.details.1.length":2,"PLUGINS.details.1.name":"Chrome PDF Viewer","PLUGINS.details.1.filename":"internal-pdf-viewer","PLUGINS.details.2.length":2,"PLUGINS.details.2.name":"Chromium PDF Viewer","PLUGINS.details.2.filename":"internal-pdf-viewer","PLUGINS.details.3.length":2,"PLUGINS.details.3.name":"Microsoft Edge PDF Viewer","PLUGINS.details.3.filename":"internal-pdf-viewer","PLUGINS.details.4.length":2,"PLUGINS.details.4.name":"WebKit built-in PDF","PLUGINS.details.4.filename":"internal-pdf-viewer","AUDIO":2,"VIDEO":0,"VIDEO_INPUT_DEVICES":"","AUDIO_INPUT_DEVICES":"","AUDIO_OUTPUT_DEVICES":"","MEDIA_CODEC_MP4_AVC1":"probably","MEDIA_CODEC_X_M4A":"maybe","MEDIA_CODEC_AAC":"probably","MEMORY_HEAP_SIZE_LIMIT":4294705152,"MEMORY_TOTAL_HEAP_SIZE":%v,"MEMORY_USED_HEAP_SIZE":%v,"IS_ACCEPT_COOKIES":true,"selenium_in_document":false,"selenium_in_window":false,"selenium_in_navigator":false,"selenium_sequentum":false,"DOCUMENT_ELEMENT_SELENIUM":"","DOCUMENT_ELEMENT_WEBDRIVER":"","DOCUMENT_ELEMENT_DRIVER":"","window_html_webdriver":false,"window_geb":false,"window_awesomium":false,"window_RunPerfTest":false,"window_fmget_targets":false,"hasTrustToken":false,"trustTokenOperationError":false,"setTrustToken":false,"trustToken":false,"localStorage.length":8,"sessionStorage.length":10,"WEB_RTC_ENABLED":true,"MQ_SCREEN.matches":true,"MQ_SCREEN.media":"(min-width: %vpx)","IFRAME_CHROME":"object","IFRAME_WIDTH":%v,"IFRAME_HEIGHT":%v,"NOTIFICATION_PERMISSION":"default","HAS_CHROME_APP":true,"HAS_CHROME_CSI":true,"HAS_CHROME_LOADTIMES":true,"HAS_CHROME_RUNTIME":false,"CHROMIUM_MATH":true,"CHROME_PROPERTY_DESCRIPTOR_APP":"{\"configurable\":true,\"enumerable\":true,\"value\":{\"isInstalled\":false,\"InstallState\":{\"DISABLED\":\"disabled\",\"INSTALLED\":\"installed\",\"NOT_INSTALLED\":\"not_installed\"},\"RunningState\":{\"CANNOT_RUN\":\"cannot_run\",\"READY_TO_RUN\":\"ready_to_run\",\"RUNNING\":\"running\"}},\"writable\":true}","CHROME_PROPERTY_DESCRIPTOR_CSI":"{\"configurable\":true,\"enumerable\":true,\"writable\":true}","CHROME_PROPERTY_DESCRIPTOR_LOADTIMES":"undefined","CHROME_PROPERTY_DESCRIPTOR_RUNTIME":"undefined","NAVIGATOR_PROPERTY_DESCRIPTOR_LANGUAGES":"{\"configurable\":true,\"enumerable\":true,\"getter\":\"function get languages() { [native code] }\"}","NAVIGATOR_PROPERTY_DESCRIPTOR_HARDWARECONCURRENCY":"{\"configurable\":true,\"enumerable\":true,\"getter\":\"function get hardwareConcurrency() { [native code] }\"}","SCREEN_PROPERTY_DESCRIPTOR_WIDTH":"{\"configurable\":true,\"enumerable\":true,\"getter\":\"function get width() { [native code] }\"}","SCREEN_PROPERTY_DESCRIPTOR_HEIGHT":"{\"configurable\":true,\"enumerable\":true,\"getter\":\"function get height() { [native code] }\"}","NAVIGATOR_PROPERTY_DESCRIPTOR_WEBDRIVER":"undefined","WINDOW_PROPERTY_DESCRIPTOR_OUTERWIDTH":"{\"configurable\":true,\"enumerable\":true,\"getter\":\"function get outerWidth() { [native code] }\"}","WINDOW_PROPERTY_DESCRIPTOR_OUTERHEIGHT":"{\"configurable\":true,\"enumerable\":true,\"getter\":\"function get outerHeight() { [native code] }\"}"},"ioMetadata":{"BLUTOOTH_SUPPORTED":true,"HAS_SPEAKERS":true,"HAS_MICROPHONE":true,"BATTERY_SUPPORTED":true,"BATTERY_LEVEL":1,"BATTERY_CHARGING":true,"BATTERY_CHARGING_TIME":0,"BATTERY_DISCHARGING_TIME":null,"GPS_SUPPORTED":true,"IS_MOBILE":false,"HAS_TOUCH":false,"PERMISSIONS.accelerometer":"granted","PERMISSIONS.background-sync":"granted","PERMISSIONS.camera":"prompt","PERMISSIONS.clipboard-read":"prompt","PERMISSIONS.clipboard-write":"granted","PERMISSIONS.geolocation":"prompt","PERMISSIONS.gyroscope":"granted","PERMISSIONS.magnetometer":"granted","PERMISSIONS.microphone":"prompt","PERMISSIONS.midi":"granted","PERMISSIONS.notifications":"prompt","PERMISSIONS.payment-handler":"granted","PERMISSIONS.persistent-storage":"prompt","PREFERS_COLOR_SCHEME":"dark"},"baseTimestamp":%v,"epochTimeInMillis":%v}`, c.DeviceType, c.DeviceID, c.AppSessionId, c.Device.Screen.Width, c.Device.Screen.Height, c.Device.Screen.AvailHeight, c.Device.Screen.AvailHeight, c.Device.Screen.Width, c.Device.Screen.Height, connection, c.AppSessionId, wgl, wgl, c.Device.Screen.Width, c.Device.Screen.Height, c.Device.Screen.Height, c.Device.Screen.AvailHeight, c.Device.Screen.Width, c.Device.Screen.Height, totalHeap, usedHeap, c.Device.Screen.Width+9, c.Device.Screen.Width, c.Device.Screen.Height, nowtime, nowtime)

	return JsonSendingPayload, nil

}
